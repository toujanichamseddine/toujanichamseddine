<table class="table table-bordered table-hover table-sm mb-0" style="width: auto; min-width: 100%; white-space: nowrap;">
  <thead class="table-light">
    <tr>
      <!-- Select All Checkbox -->
      <th>
        <input
          type="checkbox"
          [checked]="isAllSelected"
          (change)="toggleAllRows($event)"
        />
      </th>

      <!-- Dynamic Columns -->
      <ng-container *ngFor="let col of visibleColumns">
        <th>{{ col.header | translate }}</th>
      </ng-container>
    </tr>
  </thead>

  <tbody>
    <tr
      *ngFor="let row of visibleData; let i = index"
      [class.table-active]="isSelected(row)"
      (click)="onRowClick(row)"
      (dblclick)="onRowDoubleClick(row)"
      style="cursor: pointer;"
    >
      <!-- Row Checkbox -->
      <td>
        <input
          type="checkbox"
          [(ngModel)]="row.selected"
          (change)="onRowSelectChange(row)"
          (click)="$event.stopPropagation()"
        />
      </td>

      <!-- Row Data -->
      <ng-container *ngFor="let col of visibleColumns">
        <td>{{ row[col.field] }}</td>
      </ng-container>
    </tr>
  </tbody>
</table>



isAllSelected = false;
selectedRow: any = null;
selectedRows: any[] = []; // ðŸŸ¢ store selected rows here

visibleData = [
  { id: 1, name: 'Item 1', selected: false },
  { id: 2, name: 'Item 2', selected: false },
  { id: 3, name: 'Item 3', selected: false }
];

// Toggle "Select All"
toggleAllRows(event: Event) {
  const checked = (event.target as HTMLInputElement).checked;
  this.isAllSelected = checked;

  this.visibleData.forEach(row => (row.selected = checked));

  // Update selectedRows array
  this.selectedRows = checked ? [...this.visibleData] : [];
}

// Handle individual row checkbox change
onRowSelectChange(row: any) {
  if (row.selected) {
    this.selectedRows.push(row);
  } else {
    this.selectedRows = this.selectedRows.filter(r => r !== row);
  }

  // Update select all checkbox state
  this.isAllSelected = this.selectedRows.length === this.visibleData.length;
}

// Highlight on click (visual only)
onRowClick(row: any) {
  this.selectedRow = row;
}

// Double-click action (open, edit, etc.)
onRowDoubleClick(row: any) {
  console.log('Double-clicked:', row);
  // Example: this.openDetail(row);
}

isSelected(row: any): boolean {
  return this.selectedRow === row;
}

// Example: Delete selected rows
deleteSelected() {
  console.log('Deleting:', this.selectedRows);
  // Example logic:
  this.visibleData = this.visibleData.filter(r => !this.selectedRows.includes(r));
  this.selectedRows = [];
  this.isAllSelected = false;
}


this.selectedRows.forEach(row => this.open(row));