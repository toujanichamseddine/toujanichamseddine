<table class="table table-bordered table-hover table-sm mb-0" style="width: auto; min-width: 100%; white-space: nowrap;">
  <thead class="table-light">
    <tr>
      <!-- Select All checkbox -->
      <th>
        <input
          type="checkbox"
          (change)="toggleAllRows($event)"
          [checked]="isAllSelected"
        />
      </th>

      <!-- Dynamic columns -->
      <ng-container *ngFor="let col of visibleColumns; let colIndex = index">
        <th>{{ col.header | translate }}</th>
      </ng-container>
    </tr>
  </thead>

  <tbody>
    <tr
      *ngFor="let row of visibleData; let rowIndex = index"
      [class.table-active]="isSelected(row)"
      (click)="onRowClick(row)"
      (dblclick)="onRowDoubleClick(row)"
      style="cursor: pointer;"
    >
      <!-- Individual row checkbox -->
      <td>
        <input
          type="checkbox"
          [(ngModel)]="row.selected"
          (click)="$event.stopPropagation()" <!-- prevents row click event -->
        />
      </td>

      <!-- Row content -->
      <ng-container *ngFor="let col of visibleColumns">
        <td>{{ row[col.field] }}</td>
      </ng-container>
    </tr>
  </tbody>
</table>



isAllSelected = false;
selectedRow: any = null;

toggleAllRows(event: Event) {
  const checked = (event.target as HTMLInputElement).checked;
  this.isAllSelected = checked;
  this.visibleData.forEach(row => (row.selected = checked));
}

isSelected(row: any): boolean {
  return this.selectedRow === row;
}

onRowClick(row: any) {
  this.selectedRow = row;
}

onRowDoubleClick(row: any) {
  console.log('Double clicked row:', row);
  // You can open a modal or navigate to detail view here
}


tr.table-active {
  background-color: #e6f2ff !important;
}