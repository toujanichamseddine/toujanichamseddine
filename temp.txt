@GetMapping("/saml/consume")
    public String handleSamlResponse(Authentication authentication) {
        // Get the credentials from the authentication object
        Object credentials = authentication.getCredentials();

        // Ensure it's an instance of SAMLCredential
        if (credentials instanceof SAMLCredential) {
            SAMLCredential samlCredential = (SAMLCredential) credentials;

            // Process the SAML credential
            String userName = samlCredential.getNameID().getValue();
            // Process other parts of the credential if needed
            // Example: Get the assertion, attributes, etc.

            System.out.println("SAML Authentication Successful for: " + userName);
        } else {
            throw new IllegalArgumentException("Expected SAMLCredential, but got: " + credentials.getClass().getName());
        }

        return "home";
    }
